{"ast":null,"code":"import React,{useContext,useEffect,useState}from'react';import{useNavigate,useLocation}from'react-router-dom';import axios from'axios';import useCart from'../hooks/useCart';import ItemNavigationBar from'./ItemNavigationBar';import'./Item.css';import LoginContext from'../login/LoginContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Items=()=>{const{loginMember}=useContext(LoginContext);const[items,setItems]=useState([]);const{addCartItem,cartItemCount}=useCart();const navigate=useNavigate();const location=useLocation();const queryParams=new URLSearchParams(location.search);const itemType=queryParams.get('itemType');useEffect(()=>{axios.get('/getitems').then(response=>{setItems(response.data);}).catch(error=>{console.log(\"에러발생 : \"+error);});},[]);//const filteredItems = itemType ? items.filter(item => item.itemType == itemType) : items;\nconst filteredItems=itemType?items.filter(item=>itemType.includes(item.itemType)):items;const ItemClick=item=>{navigate(`/store/detail/${item.itemNo}`,{state:{item}});};const purchase=item=>{if(!loginMember){const shouldNavigate=window.confirm(\"로그인이 필요합니다. 로그인 페이지로 이동하시겠습니까?\");if(shouldNavigate){navigate('/memberLogin');return;}else{return;}}const purchaseData={itemNo:item.itemNo,itemName:item.itemName,itemImage:item.itemImage,itemPackage:item.itemPackage,itemPrice:item.itemPrice,itemPayCount:1,itemPayPrice:item.itemPrice};navigate('/store/purchase',{state:{items:[purchaseData]}});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"item-nav\",children:/*#__PURE__*/_jsx(ItemNavigationBar,{cartItemCount:cartItemCount})}),/*#__PURE__*/_jsx(\"div\",{className:\"item-container\",children:filteredItems.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"item-box\",children:[/*#__PURE__*/_jsxs(\"div\",{onClick:()=>ItemClick(item),children:[/*#__PURE__*/_jsx(\"img\",{src:item.itemImage,className:\"item-image\",alt:item.itemName}),/*#__PURE__*/_jsx(\"h2\",{className:\"item-name\",children:item.itemName}),/*#__PURE__*/_jsx(\"p\",{className:\"item-package\",children:item.itemPackage}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-price\",children:[item.itemPrice,\" \\uC6D0\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"item-cart-button\",onClick:()=>addCartItem(item),children:\"\\uD83D\\uDED2\"}),/*#__PURE__*/_jsx(\"button\",{className:\"item-buy-button\",onClick:()=>purchase(item),children:\"\\uAD6C\\uB9E4\\uD558\\uAE30\"})]})]},item.itemNo))})]});};export default Items;","map":{"version":3,"names":["React","useContext","useEffect","useState","useNavigate","useLocation","axios","useCart","ItemNavigationBar","LoginContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Items","loginMember","items","setItems","addCartItem","cartItemCount","navigate","location","queryParams","URLSearchParams","search","itemType","get","then","response","data","catch","error","console","log","filteredItems","filter","item","includes","ItemClick","itemNo","state","purchase","shouldNavigate","window","confirm","purchaseData","itemName","itemImage","itemPackage","itemPrice","itemPayCount","itemPayPrice","children","className","map","onClick","src","alt"],"sources":["C:/Users/user1/Desktop/sixsence/Sixsence/src/main/sixsence-front/src/store/Items.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom'; \r\nimport axios from 'axios';\r\nimport useCart from '../hooks/useCart'; \r\nimport ItemNavigationBar from './ItemNavigationBar';\r\nimport './Item.css';\r\nimport LoginContext from '../login/LoginContext';\r\n\r\nconst Items = () => {\r\n    const { loginMember } = useContext(LoginContext);\r\n    const [items, setItems] = useState([]);\r\n    const { addCartItem, cartItemCount } = useCart();\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n\r\n    const queryParams = new URLSearchParams(location.search);\r\n    const itemType = queryParams.get('itemType');\r\n\r\n    useEffect(() => {\r\n        axios.get('/getitems') \r\n        .then(response => {\r\n            setItems(response.data);\r\n        })\r\n        .catch(error => {\r\n            console.log(\"에러발생 : \" + error);\r\n        });\r\n    }, []);\r\n\r\n    //const filteredItems = itemType ? items.filter(item => item.itemType == itemType) : items;\r\n    const filteredItems = itemType ? items.filter(item => itemType.includes(item.itemType)) : items;\r\n\r\n    const ItemClick = (item) => {\r\n        navigate(`/store/detail/${item.itemNo}`, { state: { item } });\r\n    }\r\n\r\n    const purchase = (item) => {\r\n        if (!loginMember) {\r\n            const shouldNavigate = window.confirm(\"로그인이 필요합니다. 로그인 페이지로 이동하시겠습니까?\");\r\n            if (shouldNavigate) {\r\n                navigate('/memberLogin');\r\n                return;\r\n            } else {\r\n                return;\r\n            }\r\n        }\r\n\r\n        const purchaseData = {\r\n            itemNo: item.itemNo,\r\n            itemName: item.itemName,\r\n            itemImage: item.itemImage,\r\n            itemPackage: item.itemPackage,\r\n            itemPrice: item.itemPrice,\r\n            itemPayCount: 1,\r\n            itemPayPrice: item.itemPrice\r\n        };\r\n        navigate('/store/purchase', { state: { items: [purchaseData] } });\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className='item-nav'>\r\n                <ItemNavigationBar cartItemCount={cartItemCount} />\r\n            </div>\r\n            <div className='item-container'>\r\n                {filteredItems.map((item) => (\r\n                    <div key={item.itemNo} className='item-box'>\r\n                        <div onClick={() => ItemClick(item)}>\r\n                            <img src={item.itemImage} className='item-image' alt={item.itemName}/>\r\n                            <h2 className='item-name'>{item.itemName}</h2>\r\n                            <p className='item-package'>{item.itemPackage}</p>\r\n                            <p className='item-price'>{item.itemPrice} 원</p>\r\n                        </div>\r\n                        <div className='item-actions'>\r\n                            <button className='item-cart-button' onClick={() => addCartItem(item)}>&#128722;</button>\r\n                            <button className='item-buy-button' onClick={() => purchase(item)}>구매하기</button>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Items;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}